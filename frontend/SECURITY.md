# Безопасность авторизации во фронтенд приложении

## Реализованные меры безопасности

### 1. HttpOnly Cookies
- JWT токены сохраняются в HttpOnly cookies, что предотвращает доступ к ним через JavaScript
- Это защищает от XSS атак, так как токены недоступны клиентскому коду
- Cookies автоматически отправляются с каждым запросом к серверу

### 2. Защищенные маршруты
- Реализован механизм защищенных маршрутов через Vue Router
- Неавторизованные пользователи автоматически перенаправляются на страницу входа
- Авторизованные пользователи не могут получить доступ к страницам для гостей

### 3. Автоматическая проверка авторизации
- При загрузке приложения автоматически проверяется статус авторизации
- Токены валидируются на сервере при каждой проверке
- Состояние пользователя синхронизируется с сервером

### 4. Обработка ошибок авторизации
- HTTP interceptor автоматически обрабатывает 401 ошибки
- Пользователи перенаправляются на страницу входа при истечении токенов
- Состояние очищается при выходе из системы

### 5. Безопасные HTTP запросы
- Все запросы отправляются с флагом `withCredentials: true`
- Используется CORS для контроля доступа
- API имеет единую точку входа с централизованной обработкой ошибок

## Рекомендации для production

### Backend (что должно быть реализовано):
1. **JWT токены должны быть короткоживущими (15-30 минут)**
2. **Refresh токены для обновления access токенов**
3. **Secure и SameSite флаги для cookies в HTTPS**
4. **CORS настройки для production домена**
5. **Rate limiting для предотвращения brute force атак**
6. **Валидация и санитизация всех входящих данных**
7. **HTTPS обязательно в production**

### Настройки cookies для production:
```javascript
res.cookie('token', jwt, {
  httpOnly: true,
  secure: true, // только для HTTPS
  sameSite: 'strict',
  maxAge: 15 * 60 * 1000 // 15 минут
});
```

### Дополнительные меры:
1. **CSP (Content Security Policy) заголовки**
2. **HSTS заголовки**
3. **X-Frame-Options заголовки**
4. **Логирование попыток входа**
5. **Двухфакторная аутентификация (опционально)**

## Структура проекта

```
frontend/
├── src/
│   ├── services/
│   │   └── api.ts           # HTTP клиент с безопасными настройками
│   ├── stores/
│   │   └── auth.ts          # Pinia store для управления авторизацией
│   ├── views/
│   │   ├── LoginView.vue    # Страница входа/регистрации
│   │   └── HomeView.vue     # Защищенная главная страница
│   └── router/
│       └── index.ts         # Роутер с защищенными маршрутами
```

## Использование

1. **Вход в систему**: пользователь вводит телефон и пароль
2. **Регистрация**: создание нового аккаунта с валидацией
3. **Автоматическая авторизация**: проверка при загрузке приложения
4. **Выход**: очистка состояния и перенаправление на страницу входа